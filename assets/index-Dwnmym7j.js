(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const m of a.addedNodes)m.tagName==="LINK"&&m.rel==="modulepreload"&&n(m)}).observe(document,{childList:!0,subtree:!0});function o(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=o(r);fetch(r.href,a)}})();const i={modal:document.querySelector(".js-modal"),form:document.querySelector(".modal-form"),submitBtn:document.querySelector(".submit")},h=()=>{let e=localStorage.getItem("Tasks");return e?JSON.parse(e):[]},S=e=>{localStorage.setItem("Tasks",JSON.stringify(e))};i.form.querySelectorAll("input[required]").forEach(e=>{e.addEventListener("change",()=>{i.form.checkValidity()&&i.submitBtn.removeAttribute("disabled")})});const A=e=>{const t=h();t.push(e),S(t),L(e)},q=(e,t)=>{const o=h(),n=o.findIndex(r=>String(r.id)===e);n!==-1&&(o[n]={id:e,...t},S(o),x(o[n]))};i.form.addEventListener("submit",e=>{e.preventDefault();const t=i.form.getAttribute("data-mode"),o={title:i.form.elements.title.value,description:i.form.elements.description.value,date:i.form.elements.date.value};if(t==="add"&&A({...o,id:Date.now()}),t==="edit"){const n=i.modal.getAttribute("data-task");q(n,o)}e.target.reset(),y()});const T=()=>{const e=h(),t=i.modal.getAttribute("data-task"),o=e.findIndex(n=>String(n.id)===t);console.log(o),o!==-1&&(e.splice(o,1),S(e),j({id:t}),y())},s={openModal:document.querySelector(".js-add-task"),backdrop:document.querySelector(".js-backdrop"),modal:document.querySelector(".js-modal"),closeModal:document.querySelector(".js-close"),form:document.querySelector(".modal-form"),submitBtn:document.querySelector(".submit")},E=e=>{const t=e.getFullYear(),o=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0"),r=String(e.getHours()).padStart(2,"0"),a=String(e.getMinutes()).padStart(2,"0");return`${t}-${o}-${n}T${r}:${a}`},b=(e,t="add",o={})=>{const n=t==="edit";s.form.setAttribute("data-mode",t),s.form.elements.date.value=E(e);const r=document.createElement("button"),a=s.modal.querySelector(".delete");a&&a.remove(),n?(s.modal.setAttribute("data-task",o.id||""),r.classList.add("button","delete"),r.textContent="Delete",r.addEventListener("click",T),s.modal.appendChild(r)):s.modal.removeAttribute("data-task"),M({title:n?o.title:"",description:n?o.description:"",submitDisabled:!n}),s.backdrop.classList.add("is-open")};function M({title:e="",description:t="",submitDisabled:o=!0}){s.form.elements.title.value=e,s.form.elements.description.value=t,o?s.submitBtn.setAttribute("disabled",!0):s.submitBtn.removeAttribute("disabled")}const y=()=>{s.backdrop.classList.remove("is-open")};s.openModal.addEventListener("click",()=>{b(new Date)});s.closeModal.addEventListener("click",()=>{y()});window.addEventListener("click",e=>{e.target===s.backdrop&&y()});document.addEventListener("keydown",function(e){e.key==="Escape"&&s.backdrop.classList.contains("is-open")&&y()});const p={calendar:document.querySelector(".calendar"),buttons:document.querySelectorAll(".js-prevnext"),curDate:document.querySelector(".js-month"),datepicker:document.querySelector(".js-choose-date")},w=new Date;let c=new Date,d=c.getMonth(),l=c.getFullYear();const F=["Sunday","Monday","Tueasday","Wednesday","Thursday","Friday","Saturday"],$=[{month:"January",days:31},{month:"February",days:C()},{month:"March",days:31},{month:"April",days:30},{month:"May",days:31},{month:"June",days:30},{month:"July",days:31},{month:"August",days:31},{month:"September",days:30},{month:"October",days:31},{month:"November",days:30},{month:"December",days:31}];function C(){const e=c.getFullYear();let t=28;return e%400===0&&(t=29),t}const v=(e,t)=>e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate(),O=(e,t,o)=>{v(t,o)&&e.classList.add("today")},g=document.createDocumentFragment(),k=(e=w)=>{p.calendar.innerHTML="";const t=$[c.getMonth()];p.curDate.innerText=`${t.month} ${l}`;const o=(a,m)=>{const u=document.createElement("li");u.classList.add("cell"),m||u.classList.add("disabled");let f;return m?f=new Date(l,d,a):f=new Date(l,d-1,a),O(u,f,e),u.setAttribute("data-date",f.toISOString()),u.innerHTML=`<div class="cell-features">
                        <p class="cell-date">${a}</p>
                        <p class="cell-month">${F[f.getDay()].substring(0,2)}</p>
                      </div>
                      <ul class="tasks-container"></ul>`,u.addEventListener("click",N),u},n=new Date(l,d,0).getDate(),r=new Date(l,d,0).getDay();for(let a=n-r;a<=n;a++)g.appendChild(o(a,!1));for(let a=1;a<=t.days;a++)g.appendChild(o(a,!0));p.calendar.appendChild(g)};k();const L=e=>{document.querySelectorAll(".tasks-container").forEach(t=>{const o=t.closest(".cell").getAttribute("data-date");if(v(new Date(o),new Date(e.date))){const n=document.createElement("li");n.classList.add("task-element"),n.setAttribute("key",e.id),n.innerHTML=`<p class="task-title">${e.title}</p>
                               <p class="task-description">${e.description}</p>`,n.addEventListener("click",Y),t.appendChild(n)}})},x=e=>{document.querySelectorAll(".task-element").forEach(t=>{const o=t.getAttribute("key");(!e.title||!e.description)&&o===e.id&&t.remove(),o===e.id&&(t.querySelector(".task-title").innerHTML=e.title,t.querySelector(".task-description").innerHTML=e.description)})},j=e=>{document.querySelectorAll(".task-element").forEach(t=>{t.getAttribute("key")===e.id&&t.remove()})},D=()=>{const e=JSON.parse(localStorage.getItem("Tasks"));e&&e.forEach(t=>{L(t)})};D();p.buttons.forEach(e=>e.addEventListener("click",()=>{d=e.classList.contains("prev")?d-1:d+1,c=new Date(l,d,1),l=c.getFullYear(),d=c.getMonth(),k(),D()}));p.datepicker.addEventListener("change",e=>{c=new Date(e.target.value),l=c.getFullYear(),d=c.getMonth(),k(c),D()});function N(e){const t=e.target.getAttribute("data-date");b(new Date(t))}function Y(e){const t=e.target.closest(".task-element");if(t){e.stopPropagation();const o=t.closest(".cell").getAttribute("data-date"),n={id:t.getAttribute("key"),title:t.querySelector(".task-title").textContent,description:t.querySelector(".task-description").textContent};b(new Date(o),"edit",n)}}
