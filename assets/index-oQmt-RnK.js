(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function a(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function n(r){if(r.ep)return;r.ep=!0;const o=a(r);fetch(r.href,o)}})();const s={openModal:document.querySelector(".js-add-task"),backdrop:document.querySelector(".js-backdrop"),modal:document.querySelector(".js-modal"),closeModal:document.querySelector(".js-close"),form:document.querySelector(".modal-form")},E=e=>{const t=e.getFullYear(),a=String(e.getMonth()+1).padStart(2,"0"),n=String(e.getDate()).padStart(2,"0"),r=String(e.getHours()).padStart(2,"0"),o=String(e.getMinutes()).padStart(2,"0");return`${t}-${a}-${n}T${r}:${o}`},h=(e,t="add",a)=>{s.form.setAttribute("data-mode",t),s.form.elements.date.value=E(e),t==="edit"&&(s.modal.setAttribute("data-task",a.id),s.form.elements.title.value=a.title,s.form.elements.description.value=a.description),s.backdrop.classList.add("is-open")},y=()=>{s.backdrop.classList.remove("is-open")};s.openModal.addEventListener("click",()=>{h(new Date)});s.closeModal.addEventListener("click",()=>{y()});window.addEventListener("click",e=>{e.target===s.backdrop&&y()});document.addEventListener("keydown",function(e){e.key==="Escape"&&s.backdrop.classList.contains("is-open")&&y()});const p={calendar:document.querySelector(".calendar"),buttons:document.querySelectorAll(".js-prevnext"),curDate:document.querySelector(".js-month"),datepicker:document.querySelector(".js-choose-date")},T=new Date;let c=new Date,l=c.getMonth(),i=c.getFullYear();const q=["Sunday","Monday","Tueasday","Wednesday","Thursday","Friday","Saturday"],w=[{month:"January",days:31},{month:"February",days:A()},{month:"March",days:31},{month:"April",days:30},{month:"May",days:31},{month:"June",days:30},{month:"July",days:31},{month:"August",days:31},{month:"September",days:30},{month:"October",days:31},{month:"November",days:30},{month:"December",days:31}];function A(){const e=c.getFullYear();let t=28;return e%400===0&&(t=29),t}const b=(e,t)=>e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate(),M=(e,t,a)=>{b(t,a)&&e.classList.add("today")},g=document.createDocumentFragment(),S=(e=T)=>{p.calendar.innerHTML="";const t=w[c.getMonth()];p.curDate.innerText=`${t.month} ${i}`;const a=(o,u)=>{const m=document.createElement("li");m.classList.add("cell"),u||m.classList.add("disabled");let f;return u?f=new Date(i,l,o):f=new Date(i,l-1,o),M(m,f,e),m.setAttribute("data-date",f.toISOString()),m.innerHTML=`<div class="cell-features">
                        <p class="cell-date">${o}</p>
                        <p class="cell-month">${q[f.getDay()].substring(0,2)}</p>
                      </div>
                      <ul class="tasks-container"></ul>`,m},n=new Date(i,l,0).getDate(),r=new Date(i,l,0).getDay();for(let o=n-r;o<=n;o++)g.appendChild(a(o,!1));for(let o=1;o<=t.days;o++)g.appendChild(a(o,!0));p.calendar.appendChild(g)};S();const k=e=>{document.querySelectorAll(".tasks-container").forEach(t=>{const a=t.closest(".cell").getAttribute("data-date");if(b(new Date(a),new Date(e.date))){const n=document.createElement("li");n.classList.add("task-element"),n.setAttribute("key",e.id),n.innerHTML=`<p class="task-title">${e.title}</p>
                               <p class="task-description">${e.description}</p>`,t.appendChild(n)}})},D=()=>{const e=JSON.parse(localStorage.getItem("Tasks"));e&&e.forEach(t=>{k(t)})};D();p.buttons.forEach(e=>e.addEventListener("click",()=>{l=e.classList.contains("prev")?l-1:l+1,c=new Date(i,l,1),i=c.getFullYear(),l=c.getMonth(),S(),D()}));p.datepicker.addEventListener("change",e=>{c=new Date(e.target.value),i=c.getFullYear(),l=c.getMonth(),S(c),D()});document.querySelectorAll(".cell").forEach(e=>{e.addEventListener("click",t=>{const a=t.target.getAttribute("data-date");h(new Date(a))})});document.querySelectorAll(".task-element").forEach(e=>{const t=e.closest(".cell").getAttribute("data-date");e.addEventListener("click",a=>{a.stopPropagation();const n={id:e.getAttribute("key"),title:a.currentTarget.querySelector(".task-title").textContent,description:a.currentTarget.querySelector(".task-description").textContent};h(new Date(t),"edit",n)})});const d={modal:document.querySelector(".js-modal"),form:document.querySelector(".modal-form"),submitBtn:document.querySelector(".submit")},L=()=>{let e=localStorage.getItem("Tasks");return e?JSON.parse(e):[]},v=e=>{localStorage.setItem("Tasks",JSON.stringify(e))};d.form.querySelectorAll("input[required]").forEach(e=>e.addEventListener("change",()=>{d.form.checkValidity()&&d.submitBtn.removeAttribute("disabled")}));const $=e=>{const t=L();t.push(e),v(t),k(e)},F=(e,t)=>{const a=L(),n=a.findIndex(r=>String(r.id)===e);n!==-1&&(a[n]={id:e,...t},v(a))};d.form.addEventListener("submit",e=>{e.preventDefault();const t=d.form.getAttribute("data-mode"),a={title:d.form.elements.title.value,description:d.form.elements.description.value,date:d.form.elements.date.value};if(t==="add"&&$({...a,id:Date.now()}),t==="edit"){const n=d.modal.getAttribute("data-task");F(n,a)}e.target.reset(),y()});
